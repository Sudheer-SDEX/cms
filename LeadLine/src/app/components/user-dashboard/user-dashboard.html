<div class="dashboard-header">
    <div>
        <h1>Executive Overview</h1>
        <p class="subtitle">Track performance and lead progression</p>
    </div>
</div>

<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-content">
            <div class="stat-info">
                <div class="stat-label">Total Calls</div>
                <div class="stat-value">{{ totalCalls$ | async }}</div>
                <div class="stat-sublabel">Team Total</div>
            </div>
            <div class="stat-icon phone">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z">
                    </path>
                </svg>
            </div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <div class="stat-info">
                <div class="stat-label">Demos Scheduled</div>
                <div class="stat-value">{{ demosScheduled$ | async }}</div>
                <div class="stat-sublabel">Team Successes</div>
            </div>
            <div class="stat-icon success">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <div class="stat-info">
                <div class="stat-label">Active Leads</div>
                <div class="stat-value">{{ activeLeads$ | async }}</div>
                <div class="stat-sublabel">In Pipeline</div>
            </div>
            <div class="stat-icon active">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
            </div>
        </div>
    </div>

    <div class="stat-card">
        <div class="stat-content">
            <div class="stat-info">
                <div class="stat-label">Conversion Rate</div>
                <div class="stat-value">{{ conversionRate$ | async }}%</div>
                <div class="stat-sublabel">Call to Demo</div>
            </div>
            <div class="stat-icon conversion">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="12" y1="1" x2="12" y2="23"></line>
                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                </svg>
            </div>
        </div>
    </div>
</div>

<div class="card performance-table">
    <h3>Performance by Industry</h3>
    <div class="table-responsive">
        <table class="table industry-table">
            <thead>
                <tr>
                    <th>Industry</th>
                    <th>Total Calls</th>
                    <th>Demos Scheduled</th>
                    <th>Conversion Rate</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let stat of industryStats$ | async">
                    <td class="industry-cell">{{ stat.name }}</td>
                    <td class="number-cell">{{ stat.total }}</td>
                    <td class="number-cell">{{ stat.demos }}</td>
                    <td class="rate-cell">
                        <span class="rate-badge">{{ stat.total > 0 ? ((stat.demos / stat.total) * 100).toFixed(1) : 0
                            }}%</span>
                    </td>
                </tr>
                <tr *ngIf="(industryStats$ | async)?.length === 0">
                    <td colspan="4" class="text-center text-secondary">No calls recorded yet.</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>